"use strict";var Smolid=(()=>{var g=Object.defineProperty;var M=Object.getOwnPropertyDescriptor;var N=Object.getOwnPropertyNames;var V=Object.prototype.hasOwnProperty;var D=(n,t)=>{for(var e in t)g(n,e,{get:t[e],enumerable:!0})},v=(n,t,e,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of N(t))!V.call(n,r)&&r!==e&&g(n,r,{get:()=>t[r],enumerable:!(i=M(t,r))||i.enumerable});return n};var x=n=>v(g({},"__esModule",{value:!0}),n);var Y={};D(Y,{ErrInvalidType:()=>b,ErrUntyped:()=>a,FromString:()=>A,ID:()=>s,Must:()=>I,New:()=>d,NewWithType:()=>_,Nil:()=>S,SmolIDError:()=>o,default:()=>H});var T=1735707600000n,B=0b11111111111111111111111111111111111111111n,p=23n,L=B<<p,m=21n,F=0b11n<<m,h=9n,E=0b1n<<20n,f=0b1111111n,y=f<<h,U=0xfffffn,O=0b1n<<21n,u="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",c={};for(let n=0;n<u.length;n++)c[u[n]]=n,c[u[n].toLowerCase()]=n;var o=class extends Error{constructor(t){super(t),this.name="SmolIDError"}},a=new o("no type id is embedded"),b=new o(`invalid type id: must be less than or equal to ${f}`);function P(n){let t=0,e=0,i="";for(let r=0;r<n.length;r++)for(e=e<<8|n[r],t+=8;t>=5;)i+=u[e>>>t-5&31],t-=5;return t>0&&(i+=u[e<<5-t&31]),i}function C(n){n=n.toUpperCase();let t=0,e=0,i=0,r=new Uint8Array(8);for(let l=0;l<n.length;l++){let w=n[l];if(!(w in c))throw new o(`invalid character in base32 string: ${w}`);e=e<<5|c[w],t+=5,t>=8&&(r[i++]=e>>>t-8&255,t-=8)}return r}function R(n){let t=new Uint8Array(8);if(typeof crypto<"u"&&crypto.getRandomValues)crypto.getRandomValues(t);else for(let r=0;r<t.length;r++)t[r]=Math.floor(Math.random()*256);return new DataView(t.buffer).getBigUint64(0,!1)%n}var s=class{constructor(t){this.n=t}toString(){return P(this.toBytes()).toLowerCase()}version(){return Number((this.n&F)>>m)}toBytes(){let t=new Uint8Array(8);return new DataView(t.buffer).setBigUint64(0,this.n,!1),t}toTime(){let t=Number((this.n>>p)+T);return new Date(t)}getType(){if(!this.isTyped())throw a;let t=this.n&y;return Number(t>>h)}isTyped(){return(this.n&E)!==0n}isOfType(t){if(!this.isTyped())throw a;if(t>Number(f))throw b;let e=this.getType();return t===e}toBigInt(){return this.n}toNumber(){return Number(this.n)}};function d(n){let e=BigInt(n??Date.now())-T<<p;return e|=O,e|=R(U),new s(e)}function S(){return new s(0n)}function _(n,t){if(n>Number(f))throw b;let e=d(t);return e.n&=~y,e.n|=E,e.n|=BigInt(n)<<h,e}function A(n){let t=C(n),i=new DataView(t.buffer).getBigUint64(0,!1);return new s(i)}function I(n){try{return n()}catch(t){throw new o(`couldn't parse id: ${t instanceof Error?t.message:String(t)}`)}}var H={New:d,Nil:S,NewWithType:_,FromString:A,Must:I,ID:s,SmolIDError:o,ErrUntyped:a,ErrInvalidType:b};return x(Y);})();
